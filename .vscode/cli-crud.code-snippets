{
    "CLI crud.py": {
        "scope": "python",
        "prefix": "clicrud",
        "description": "Contenido de CLI CRUD",
        "body": [
            "\"\"\"",
            "${1:Modulos} CRUD (create, read, update, and delete)",
            "\"\"\"",
            "from typing import Any",
            "",
            "import requests",
            "",
            "from config.settings import BASE_URL, LIMIT, TIMEOUT",
            "import lib.exceptions",
            "",
            "",
            "def get_${2:ruta}(",
            "\tauthorization_header: dict,",
            "\tlimit: int = LIMIT,",
            "\tfiltro_str: str = None,",
            "\tfiltro_bool: bool = None,",
            "\toffset: int = 0,",
            ") -> Any:",
            "\t\"\"\" Solicitar ${3:descripciones} \"\"\"",
            "\tparametros = {\"limit\": limit}",
            "\tif filtro_str is not None:",
            "\t\tparametros[\"filtro_str\"] = filtro_str",
            "\tif filtro_bool is not None:",
            "\t\tparametros[\"filtro_bool\"] = filtro_bool",
            "\tif offset > 0:",
            "\t\tparametros[\"offset\"] = offset",
            "\ttry:",
            "\t\tresponse = requests.get(",
            "\t\t\tf\"{BASE_URL}/${2:ruta}\",",
            "\t\t\theaders=authorization_header,",
            "\t\t\tparams=parametros,",
            "\t\t\ttimeout=TIMEOUT,",
            "\t\t)",
            "\t\tresponse.raise_for_status()",
            "\texcept requests.exceptions.ConnectionError as error:",
            "\t\traise lib.exceptions.CLIStatusCodeError(\"No hubo respuesta al solicitar ${3:descripciones}\") from error",
            "\texcept requests.exceptions.HTTPError as error:",
            "\t\traise lib.exceptions.CLIStatusCodeError(\"Error Status Code al solicitar ${3:descripciones}: \" + str(error)) from error",
            "\texcept requests.exceptions.RequestException as error:",
            "\t\traise lib.exceptions.CLIConnectionError(\"Error inesperado al solicitar ${3:descripciones}\") from error",
            "\tdata_json = response.json()",
            "\tif \"items\" not in data_json or \"total\" not in data_json:",
            "\t\traise lib.exceptions.CLIResponseError(\"No se recibio items o total en la respuesta al solicitar ${3:descripciones}\")",
            "\treturn data_json",
            "",
            ""
        ]
    }
}
